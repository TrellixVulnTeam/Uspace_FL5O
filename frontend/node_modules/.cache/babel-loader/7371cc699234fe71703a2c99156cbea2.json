{"ast":null,"code":"import _slicedToArray from\"/Users/aaronyan/Shopping-Platform/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/aaronyan/Shopping-Platform/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/aaronyan/Shopping-Platform/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState,useEffect}from\"react\";import firebase from\"firebase\";import StyleFirebaseAuth from\"react-firebaseui/StyledFirebaseAuth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var uiConfig={signInFlow:\"popup\",signInOptions:[firebase.auth.EmailAuthProvider.PROVIDER_ID,firebase.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){var _signInSuccessWithAuthResult=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(authResult){var userInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userInfo=authResult.additionalUserInfo;if(!(userInfo.isNewUser&&userInfo.providerId===\"password\")){_context.next=11;break;}_context.prev=2;_context.next=5;return authResult.user.sendEmailVerification();case 5:console.log(\"Check your email.\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 11:return _context.abrupt(\"return\",false);case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,8]]);}));function signInSuccessWithAuthResult(_x){return _signInSuccessWithAuthResult.apply(this,arguments);}return signInSuccessWithAuthResult;}()}};var signOut=function signOut(){firebase.auth().signOut().then(function(){console.log(\"Successufully Signed out\");}).catch(function(){console.log(\"Error Signed out\");});};var Signup=function Signup(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){// eslint-disable-next-line\nvar user=firebase.auth().currentUser;var authObserver=firebase.auth().onAuthStateChanged(function(user){setUser(user);});return authObserver;});console.log(\"user\",user);if(user){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",user.displayName,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:user.email}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:signOut,children:\"Sign out\"})]})});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Sign up / Register\"}),/*#__PURE__*/_jsx(StyleFirebaseAuth,{uiConfig:uiConfig,firebaseAuth:firebase.auth()})]});}};export default Signup;","map":{"version":3,"sources":["/Users/aaronyan/Shopping-Platform/frontend/src/Signup.js"],"names":["React","useState","useEffect","firebase","StyleFirebaseAuth","uiConfig","signInFlow","signInOptions","auth","EmailAuthProvider","PROVIDER_ID","GoogleAuthProvider","callbacks","signInSuccessWithAuthResult","authResult","userInfo","additionalUserInfo","isNewUser","providerId","user","sendEmailVerification","console","log","signOut","then","catch","Signup","setUser","currentUser","authObserver","onAuthStateChanged","displayName","email"],"mappings":"oXAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qCAA9B,C,6IAEA,GAAIC,CAAAA,QAAQ,CAAG,CACbC,UAAU,CAAE,OADC,CAEbC,aAAa,CAAE,CACbJ,QAAQ,CAACK,IAAT,CAAcC,iBAAd,CAAgCC,WADnB,CAEbP,QAAQ,CAACK,IAAT,CAAcG,kBAAd,CAAiCD,WAFpB,CAFF,CAMbE,SAAS,CAAE,CACTC,2BAA2B,qGAAE,iBAAOC,UAAP,+HACrBC,QADqB,CACVD,UAAU,CAACE,kBADD,MAEvBD,QAAQ,CAACE,SAAT,EAAsBF,QAAQ,CAACG,UAAT,GAAwB,UAFvB,iEAIjBJ,CAAAA,UAAU,CAACK,IAAX,CAAgBC,qBAAhB,EAJiB,QAKvBC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EALuB,+EAOvBD,OAAO,CAACC,GAAR,cAPuB,wCAUpB,KAVoB,sEAAF,6IADlB,CANE,CAAf,CAsBA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBpB,QAAQ,CACLK,IADH,GAEGe,OAFH,GAGGC,IAHH,CAGQ,UAAY,CAChBH,OAAO,CAACC,GAAR,CAAY,0BAAZ,EACD,CALH,EAMGG,KANH,CAMS,UAAY,CACjBJ,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACD,CARH,EASD,CAVD,CAYA,GAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,cAAwBzB,QAAQ,CAAC,IAAD,CAAhC,wCAAOkB,IAAP,eAAaQ,OAAb,eAEAzB,SAAS,CAAC,UAAM,CACd;AACA,GAAMiB,CAAAA,IAAI,CAAGhB,QAAQ,CAACK,IAAT,GAAgBoB,WAA7B,CACA,GAAMC,CAAAA,YAAY,CAAG1B,QAAQ,CAACK,IAAT,GAAgBsB,kBAAhB,CAAmC,SAACX,IAAD,CAAU,CAChEQ,OAAO,CAACR,IAAD,CAAP,CACD,CAFoB,CAArB,CAGA,MAAOU,CAAAA,YAAP,CACD,CAPQ,CAAT,CASAR,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAoBH,IAApB,EAEA,GAAIA,IAAJ,CAAU,CACR,mBACE,sCACE,iCACYA,IAAI,CAACY,WADjB,kBAC8B,aAD9B,cAEE,uBAAQZ,IAAI,CAACa,KAAb,EAFF,kBAE8B,aAF9B,cAGE,eAAQ,OAAO,CAAET,OAAjB,sBAHF,GADF,EADF,CASD,CAVD,IAUO,CACL,mBACE,wCACE,2CADF,cAEE,KAAC,iBAAD,EAAmB,QAAQ,CAAElB,QAA7B,CAAuC,YAAY,CAAEF,QAAQ,CAACK,IAAT,EAArD,EAFF,GADF,CAMD,CACF,CAhCD,CAkCA,cAAekB,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport firebase from \"firebase\";\nimport StyleFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\n\nvar uiConfig = {\n  signInFlow: \"popup\",\n  signInOptions: [\n    firebase.auth.EmailAuthProvider.PROVIDER_ID,\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n  ],\n  callbacks: {\n    signInSuccessWithAuthResult: async (authResult) => {\n      const userInfo = authResult.additionalUserInfo;\n      if (userInfo.isNewUser && userInfo.providerId === \"password\") {\n        try {\n          await authResult.user.sendEmailVerification();\n          console.log(\"Check your email.\");\n        } catch (e) {\n          console.log(e);\n        }\n      }\n      return false;\n    },\n  },\n};\n\nconst signOut = () => {\n  firebase\n    .auth()\n    .signOut()\n    .then(function () {\n      console.log(\"Successufully Signed out\");\n    })\n    .catch(function () {\n      console.log(\"Error Signed out\");\n    });\n};\n\nconst Signup = () => {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // eslint-disable-next-line\n    const user = firebase.auth().currentUser;\n    const authObserver = firebase.auth().onAuthStateChanged((user) => {\n      setUser(user);\n    });\n    return authObserver;\n  });\n\n  console.log(\"user\", user);\n\n  if (user) {\n    return (\n      <>\n        <p>\n          Welcome, {user.displayName} <br />\n          <small>{user.email}</small> <br />\n          <button onClick={signOut}>Sign out</button>\n        </p>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <div>Sign up / Register</div>\n        <StyleFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n      </>\n    );\n  }\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}